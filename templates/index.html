<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üåô Morel Mushroom Predictor</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

<style>
  /* =========================
     Hippie Mushroom Theme
     - Custom background (no external images)
     - Readable glass cards
     ========================= */

  :root{
    --bg-0: #0c0b14;
    --glass: rgba(18, 18, 24, 0.72);
    --glass-2: rgba(18, 18, 24, 0.82);
    --border: rgba(255,255,255,0.12);

    --text: #f3f3f7;
    --muted: rgba(243,243,247,0.75);

    --accent: #ffde59;
    --accent-2: #ff6b6b;
    --accent-3: #59ffd7;
    --accent-4: #b56bff;
  }

  *{ box-sizing: border-box; }

  body{
    font-family: 'Roboto', sans-serif;
    color: var(--text);
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;

    background-color: var(--bg-0);
    position: relative;
    isolation: isolate; /* keep pseudo layers behind */
    overflow-x: hidden;
  }

  /* ---- Custom Hippie Mushroom Background (pure CSS + inline SVG) ---- */
  body::before{
    content:"";
    position: fixed;
    inset: 0;
    z-index: -3;

    /* psychedelic base glow */
    background:
      radial-gradient(1100px 650px at 12% 18%, rgba(255, 105, 180, 0.22), transparent 60%),
      radial-gradient(900px 650px at 88% 22%, rgba(89, 255, 215, 0.18), transparent 58%),
      radial-gradient(950px 700px at 45% 90%, rgba(255, 222, 89, 0.18), transparent 60%),
      radial-gradient(1000px 700px at 75% 78%, rgba(181, 107, 255, 0.18), transparent 62%),
      linear-gradient(135deg, #0b0a14 0%, #121225 45%, #0c0b14 100%);

    filter: saturate(1.15);
  }

  body::after{
    content:"";
    position: fixed;
    inset: 0;
    z-index: -2;

    /* custom repeating SVG pattern: mushrooms + peace sign + sparkles */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260' viewBox='0 0 260 260'%3E%3Cdefs%3E%3ClinearGradient id='cap' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23ff6bd6'/%3E%3Cstop offset='1' stop-color='%23b56bff'/%3E%3C/linearGradient%3E%3ClinearGradient id='cap2' x1='1' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%2359ffd7'/%3E%3Cstop offset='1' stop-color='%23ffde59'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='260' height='260' fill='none'/%3E%3C!-- Big mushroom --%3E%3Cg transform='translate(22 40) rotate(-6 85 85)' opacity='0.92'%3E%3Cpath d='M20 85 C28 40 58 18 95 18 C132 18 162 40 170 85 C128 98 62 98 20 85 Z' fill='url(%23cap)'/%3E%3Ccircle cx='65' cy='52' r='6.5' fill='%23fff' opacity='0.85'/%3E%3Ccircle cx='90' cy='44' r='5.5' fill='%23fff' opacity='0.85'/%3E%3Ccircle cx='112' cy='58' r='4.8' fill='%23fff' opacity='0.85'/%3E%3Cpath d='M78 86 C70 122 72 150 95 168 C118 150 120 122 112 86 Z' fill='%23f4ead9'/%3E%3Cpath d='M72 120 C85 114 105 114 118 120' fill='none' stroke='%23d9cfbd' stroke-width='3' stroke-linecap='round' opacity='0.7'/%3E%3C/g%3E%3C!-- Small mushroom --%3E%3Cg transform='translate(170 150) rotate(10 35 35)' opacity='0.92'%3E%3Cpath d='M6 35 C10 16 24 6 40 6 C56 6 70 16 74 35 C56 42 24 42 6 35 Z' fill='url(%23cap2)'/%3E%3Ccircle cx='27' cy='20' r='3.8' fill='%23fff' opacity='0.85'/%3E%3Ccircle cx='42' cy='18' r='3.2' fill='%23fff' opacity='0.85'/%3E%3Cpath d='M33 35 C30 52 31 64 40 72 C49 64 50 52 47 35 Z' fill='%23f4ead9'/%3E%3C/g%3E%3C!-- Peace sign --%3E%3Cg transform='translate(175 35)' opacity='0.65'%3E%3Ccircle cx='34' cy='34' r='26' fill='none' stroke='%23ffde59' stroke-width='4'/%3E%3Cpath d='M34 8 L34 60' stroke='%23ffde59' stroke-width='4' stroke-linecap='round'/%3E%3Cpath d='M34 34 L14 54' stroke='%23ffde59' stroke-width='4' stroke-linecap='round'/%3E%3Cpath d='M34 34 L54 54' stroke='%23ffde59' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3C!-- Sparkles --%3E%3Cg opacity='0.55'%3E%3Cpath d='M40 210 L44 220 L54 224 L44 228 L40 238 L36 228 L26 224 L36 220 Z' fill='%2359ffd7'/%3E%3Cpath d='M210 110 L213 117 L220 120 L213 123 L210 130 L207 123 L200 120 L207 117 Z' fill='%23ffde59'/%3E%3Cpath d='M120 110 L123 116 L130 119 L123 122 L120 128 L117 122 L110 119 L117 116 Z' fill='%23ff6b6b'/%3E%3C/g%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 260px 260px;

    opacity: 0.16; /* keep it subtle */
    filter: saturate(1.25) contrast(1.05);
    transform: translateZ(0);
  }

  /* grain overlay */
  .grain{
    pointer-events: none;
    position: fixed;
    inset: 0;
    z-index: -1;
    opacity: 0.10;
    mix-blend-mode: overlay;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 220px 220px;
  }

  /* gentle vibe drift (respect reduced motion) */
  @media (prefers-reduced-motion: no-preference){
    body::before{ animation: hueDrift 18s linear infinite; }
    body::after{ animation: floatDrift 30s ease-in-out infinite; }
  }
  @keyframes hueDrift{
    0%{ filter: saturate(1.15) hue-rotate(0deg); }
    100%{ filter: saturate(1.15) hue-rotate(18deg); }
  }
  @keyframes floatDrift{
    0%,100%{ transform: translate(0,0); }
    50%{ transform: translate(14px,-10px); }
  }

  /* =========================
     UI Styles (your original layout, upgraded)
     ========================= */

  h1{
    color: var(--accent);
    text-align: center;
    text-shadow: 2px 2px var(--accent-2);
    margin: 10px 0 18px;
    letter-spacing: 0.2px;
  }

  /* Tabs */
  .tabs{
    display: flex;
    margin-bottom: 20px;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .tab{
    padding: 10px 18px;
    background: var(--glass);
    border-radius: 14px;
    cursor: pointer;
    border: 1px solid var(--border);
    transition: transform .15s ease, background .2s ease, border-color .2s ease, color .2s ease;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    user-select: none;
  }

  .tab:hover{
    transform: translateY(-1px);
    border-color: rgba(255,255,255,0.18);
  }

  .tab.active{
    background-color: var(--accent);
    color: #121212;
    border-color: rgba(0,0,0,0.18);
  }

  .tab-content{
    display: none;
    background: var(--glass-2);
    padding: 15px;
    border-radius: 18px;
    border: 1px solid var(--border);
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    margin-bottom: 20px;
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }
  .tab-content.active{ display: block; }

  /* Form */
  form{
    background: var(--glass-2);
    padding: 20px;
    border-radius: 18px;
    border: 1px solid var(--border);
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }

  label{
    font-weight: 700;
    color: var(--text);
  }

  input[type="text"], select{
    width: 100%;
    padding: 10px 12px;
    margin-top: 6px;
    margin-bottom: 14px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.14);
    background-color: rgba(30,30,40,0.80);
    color: var(--text);
    outline: none;
  }

  input[type="text"]::placeholder{
    color: rgba(243,243,247,0.55);
  }

  input[type="text"]:focus, select:focus{
    border-color: rgba(255, 222, 89, 0.55);
    box-shadow: 0 0 0 3px rgba(255, 222, 89, 0.12);
  }

  button{
    background-color: var(--accent);
    color: #121212;
    border: none;
    padding: 10px 18px;
    border-radius: 14px;
    cursor: pointer;
    font-size: 1em;
    font-weight: 700;
    box-shadow: 0 10px 18px rgba(0,0,0,0.25);
    transition: transform 0.12s ease, filter 0.12s ease;
  }
  button:hover{ filter: brightness(0.98); transform: translateY(-1px); }
  button:active{ transform: translateY(0); }

  /* Results / error */
  .result{
    margin-top: 20px;
    padding: 15px;
    border-radius: 18px;
    border: 1px solid var(--border);
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    background: var(--glass-2);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }

  .result h2{
    margin: 0 0 10px;
  }

  .result p{
    margin: 6px 0;
    color: var(--muted);
  }

  .result strong{
    color: var(--text);
  }

  .error{
    color: var(--accent-2);
    font-weight: 800;
    margin-top: 18px;
  }

  .mushroom-img{
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    border-radius: 16px;
    margin-top: 15px;
    border: 1px solid rgba(255,255,255,0.12);
  }

  iframe{
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.12);
  }

  .watermark{
    position: fixed;
    bottom: 6px;
    right: 10px;
    color: var(--accent);
    font-size: 12px;
    pointer-events: none;
    opacity: 0.85;
    text-shadow: 0 2px 10px rgba(0,0,0,0.55);
  }

  /* small screens */
  @media (max-width: 520px){
    body{ padding: 14px; }
    .tab{ flex: 1 1 auto; text-align: center; }
  }
</style>
</head>

<body>
  <div class="grain"></div>

  <h1>üçÑüåà Morel Mushroom Predictor</h1>

  <!-- Tabs -->
  <div class="tabs">
    <div class="tab active" data-tab="predictor">Predictor</div>
    <div class="tab" data-tab="faq">FAQ</div>
    <div class="tab" data-tab="videos">Videos</div>
  </div>

  <!-- Tab Contents -->
  <div class="tab-content active" id="predictor-tab">
    <form method="POST">
      <label>Enter City or ZIP:</label>
      <input type="text" name="location" value="{{ location or '' }}" required />

      <label>Elm / Ash / Apple / Poplar Trees Nearby?</label>
      <select name="trees">
        <option value="yes" {% if trees=='yes' %}selected{% endif %}>Yes</option>
        <option value="no" {% if trees=='no' %}selected{% endif %}>No</option>
      </select>

      <button type="submit">Check Growth Conditions</button>

      <img
        src="https://images.unsplash.com/photo-1616627450008-4e0d021f59a3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=800"
        alt="Mushroom"
        class="mushroom-img"
      />
    </form>

    {% if error %}
      <div class="error">{{ error }}</div>
    {% endif %}

    {% if weather %}
      <div class="result">
        <h2>Results for {{ location }}</h2>
        <p><strong>Avg Day Temp:</strong> {{ weather.avg_day_temp|round(1) }} ¬∞F</p>
        <p><strong>Avg Night Temp:</strong> {{ weather.avg_night_temp|round(1) }} ¬∞F</p>
        <p><strong>Total Rain (7 days):</strong> {{ weather.total_rain|round(2) }} in</p>
        <p><strong>Avg Soil Temp:</strong> {{ weather.avg_soil_temp|round(1) }} ¬∞F</p>
        <h3>üçÑ Morel Growth Probability: {{ probability }}%</h3>

        <img
          src="https://images.unsplash.com/photo-1616627590001-2a0a7f66f7d2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=800"
          alt="Nature"
          class="mushroom-img"
        />
      </div>
    {% endif %}
  </div>

  <div class="tab-content" id="faq-tab">
    <h2>FAQ</h2>
    <p><strong>Q1:</strong> When do Morel mushrooms grow?</p>
    <p>A1: Usually in spring when soil temperatures are between 45‚Äì55¬∞F.</p>
    <p><strong>Q2:</strong> What trees help them grow?</p>
    <p>A2: Elm, Ash, Apple, and Poplar trees.</p>
  </div>

  <div class="tab-content" id="videos-tab">
    <h2>Videos</h2>
    <p>Here you can embed helpful mushroom videos.</p>
    <iframe
      width="100%"
      height="315"
      src="https://www.youtube.com/embed/VIDEO_ID_HERE"
      frameborder="0"
      allowfullscreen
    ></iframe>
  </div>

  <div class="watermark">cL</div>

  <script>
    const tabs = document.querySelectorAll(".tab");
    const contents = document.querySelectorAll(".tab-content");

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("active"));
        contents.forEach(c => c.classList.remove("active"));

        tab.classList.add("active");
        document.getElementById(tab.dataset.tab + "-tab").classList.add("active");
      });
    });
  </script>
</body>
</html>